{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/abstracts.js","src/js/components/grab-assets.js","src/js/components/vr-arm-item-selector.js","src/js/components/vr-arm-preview-icon.js","src/js/main.js","src/js/projects/vr-mechanism.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","\r\nconst abstracts = {\r\n\r\n    backgroundcolor: 0xfefefe,\r\n    accentColor: 0x5588ff,\r\n    skyColor: 0x87CEFA,\r\n    groudColor: 0x3CB371,\r\n    warmColor: 0xe5a665,\r\n\r\n    themeMonoColor1: 0xF6FAFB,\r\n    themeMonoColor2: 0xC3CACD,\r\n    themeMonoColor3: 0x97A1A4,\r\n    themeMonoColor4: 0x717C80,\r\n    themeMonoColor5: 0x49565A,\r\n    themeMonoColor6: 0x1F282C,\r\n\r\n    particles: {\r\n        FLOOR_LEVEL: -10\r\n    }\r\n}\r\n\r\nmodule.exports = abstracts;","// Must be placed on controller elements\r\nAFRAME.registerComponent('grab-assets', {\r\n    schema: {},\r\n    init: function() {\r\n        this.controller = this.el;\r\n\r\n        //this.el.\r\n\r\n        this.assetWorldPos = new THREE.Vector3();\r\n        this.currentAssetEl = undefined;              // The assets element\r\n        this.updateAsset = false;                   // Whether to continuously update the assets being grabbed\r\n\r\n        this.currentAssetQuaternion = new THREE.Quaternion();\r\n        this.tempAssetQuanternion = new THREE.Quaternion();\r\n        this.startingAssetQuanternion = new THREE.Quaternion();\r\n        //this.icons = document.querySelectorAll('[preview-icon]')\r\n        \r\n        // When the controller tigger is pressed down\r\n        this.controller.addEventListener('triggerdown', (e) => {\r\n            console.log('trigger down');\r\n            // The controller can either be \"free\" or \"colliding\" as specified in the main.js file\r\n            // Colliding refers to colliding with a preview-icon\r\n            if (this.controller.is('colliding')) {\r\n                try {\r\n                    let assetEl = this.el.components['aabb-collider']['intersectedEls'][0];\r\n                    let assetData = undefined; \r\n                    if (assetEl) {\r\n                        if (assetEl.components['preview-icon']) {\r\n                            // Preview Icon Click\r\n                            assetData = assetEl.components['preview-icon'].data;\r\n                            this.createAsset(assetData.obj, assetData.mtl);\r\n                        } else if (assetEl.components['obj-model']) {\r\n                            // Object Model Clicked\r\n                            this.currentAssetEl = assetEl;\r\n                            this.updateAsset = true;\r\n                            //console.log(assetEl.object3D.position);\r\n                            //previewIconEl.components['preview-icon'].data;\r\n                        }\r\n                    }\r\n                    console.log('colliding');\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n            }\r\n        });\r\n\r\n        this.controller.addEventListener('triggerup', (e) => {\r\n            if (this.controller.is('colliding')) {\r\n                console.log('colliding');\r\n            }\r\n            this.updateAsset = false;\r\n            console.log('trigger up');\r\n        });\r\n    },\r\n    update: function () {},\r\n    tick: function () {\r\n        if (this.updateAsset !== false && this.currentAssetEl !== undefined) {\r\n            let worldPos = this.calcWorldPos(this.el.object3D.matrixWorld);\r\n            this.currentAssetEl.setAttribute('position', `${worldPos.x} ${worldPos.y} ${worldPos.z}`);\r\n            this.currentAssetQuaternion.copy(this.el.object3D.getWorldQuaternion());\r\n            console.log(this.currentAssetQuaternion);\r\n            this.tempAssetQuanternion.multiplyQuaternions(this.startingAssetQuaternion, this.currentAssetQuaternion);\r\n            \r\n            //console.log(this.currentAssetQuaternion);\r\n            //this.currentAssetQuaternion.multiply(this.el.object3D.getWorldQuaternion());\r\n            // Rotation\r\n            //.applyQuaternion(this.el.object3D.getWorldQuaternion());\r\n            //this.currentAssetEl.object3D.setRotationFromQuaternion(this.tempAssetQuanternion);\r\n            //this.currentAssetEl.object3D.setRotationFromQuaternion(this.el.object3D.getWorldQuaternion());\r\n\r\n        } else {\r\n            //console.log('update', this.updateAsset, 'asset', this.currentAssetEl);\r\n            //console.log('asset', this.currentAsset);\r\n        }\r\n    },\r\n    remove: function () {},\r\n    pause: function () {},\r\n    play: function () {},\r\n\r\n    createAsset(objUrl, mtlUrl) {\r\n        this.currentAssetEl = document.createElement('a-entity');\r\n        this.currentAssetEl.setAttribute('obj-model', {\r\n            obj: objUrl,\r\n            mtl: mtlUrl\r\n        });\r\n\r\n        this.currentAssetEl.setAttribute('scale', '0.01 0.01 0.01');\r\n        this.currentAssetEl.setAttribute('class', 'collides');\r\n\r\n        console.log('POSITION');\r\n\r\n        //this.calcWorldPos(this.el.object3D.matrixWorld);\r\n        //this.currentAssetEl.setAttribute('position', `${this.assetWorldPos.x} ${this.assetWorldPos.y} ${this.assetWorldPos.z}`);\r\n        \r\n        //this.currentAssetQuaternion.copy(this.currentAssetEl.object3D.getWorldQuaternion());\r\n        this.startingAssetQuanternion.copy(this.currentAssetEl.object3D.getWorldQuaternion());\r\n        console.log(this.startingAssetQuanternion);\r\n\r\n        this.el.sceneEl.appendChild(this.currentAssetEl);\r\n        this.currentAssetEl.flushToDOM();\r\n        this.updateAsset = true;\r\n    },\r\n\r\n    updateExistingAsset(assetEl) {\r\n\r\n        this.currentAssetEl.setAttribute('scale', '0.01 0.01 0.01');\r\n        this.currentAssetEl.setAttribute('class', 'collides');\r\n\r\n        console.log('POSITION');\r\n\r\n        //this.calcWorldPos(this.el.object3D.matrixWorld);\r\n        //this.currentAssetEl.setAttribute('position', `${this.assetWorldPos.x} ${this.assetWorldPos.y} ${this.assetWorldPos.z}`);\r\n        \r\n        this.el.sceneEl.appendChild(this.currentAssetEl);\r\n        this.currentAssetEl.flushToDOM();\r\n        this.updateAsset = true;\r\n    },\r\n\r\n    calcWorldPos(elementMatrix) {\r\n        return this.assetWorldPos.setFromMatrixPosition(elementMatrix);\r\n    },\r\n\r\n\r\n  });","AFRAME.registerComponent('item-selector', {\r\n    schema: {\r\n        // size: {type: 'vec2', default: {x:0.5, y:0.2}}\r\n        // Contain a list of objects\r\n        // ex: {\r\n        //      name:    // Name of object\r\n        //      obj:     // 3D object location\r\n        //      preview: // Preview image location\r\n        // }\r\n        assetList: {type: 'string', default: \"[]\"}\r\n    },\r\n\r\n    init: function () {\r\n\r\n        console.log(this.data.assetList);\r\n\r\n        this.assetList = [];\r\n\r\n        // Display rectangle\r\n        let displayG = new THREE.BoxBufferGeometry(0.2, 0.01, 0.35);\r\n        let displayM = new THREE.MeshBasicMaterial({\r\n            color: 0xbbbbff,\r\n            side: 'double'\r\n        });\r\n        this.displayMesh = new THREE.Mesh(displayG, displayM);\r\n\r\n        this.el.setObject3D('mesh', this.displayMesh);\r\n        this.el.setAttribute('position', '-0.1 0.2 0.1');\r\n        this.el.setAttribute('rotation', '0 0 -75');\r\n\r\n\r\n        // Preview Icon Container\r\n        const ICON_HEIGHT = 0.05;\r\n        const ICON_WIDTH = 0.05;\r\n        this.ICON_OFFSET = 0.11;\r\n        this.ICON_MULTIPLYER = 0.08;\r\n\r\n        let previewIconContainerG = new THREE.BoxBufferGeometry(ICON_HEIGHT, 0.01, ICON_WIDTH);\r\n        let previewIconContainerM = new THREE.MeshBasicMaterial({\r\n            color: 0x999999,\r\n            side: 'double'\r\n        });\r\n        this.previewIconContainerMesh = new THREE.Mesh(displayG, displayM);\r\n    },\r\n    update: function () {\r\n\r\n        // Setup assertList\r\n        try {\r\n            this.assetList = JSON.parse(this.data.assetList);\r\n            this.updateAssetList(this.assetList);\r\n        } catch(e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    tick: function () {},\r\n    remove: function () {},\r\n    pause: function () {},\r\n    play: function () {},\r\n\r\n    updateAssetList(newAssetList) {\r\n        // Remove all previous elements from the list\r\n        // if (this.currentAssetElements.length > 0) {\r\n        //     this.currentAssetElements.forEach((asset) => {\r\n        //         this.el.removeObject3D(asset.name. asset.mesh);\r\n        //     });\r\n        // }\r\n        console.log('hit1');\r\n        if (newAssetList.length > 0) {\r\n            newAssetList.forEach((asset, i) => {\r\n                console.log('Asset' , asset);\r\n                console.log('hit inside');\r\n                //this.el.setObject3D('icon_' + i, this.displayMesh);\r\n                let icon = document.createElement('a-entity');\r\n                \r\n                icon.setAttribute('preview-icon', `name: ${asset.name}; obj: ${asset.obj}; mtl: ${asset.mtl}; previewImage: ${asset.previewImage}`);\r\n                icon.setAttribute('position', `0 0.01 ${(-i*this.ICON_MULTIPLYER) + this.ICON_OFFSET}`);\r\n                this.el.appendChild(icon);\r\n                \r\n                console.log('Element Created');\r\n            });\r\n        }\r\n        \r\n        //this.el.setObject3D('icon_1', this.displayMesh);\r\n        //this.el.setAttribute('position', '-0.2 0 0.1');\r\n    }\r\n  });","AFRAME.registerComponent('preview-icon', {\r\n    schema: {\r\n        name: {type: \"string\", default: \"temp\"},\r\n        previewImage: {type: \"string\", 'default': ''},\r\n        obj: {type: \"string\", default: ''},\r\n        mtl: {type: \"string\", default: ''},\r\n        collisionObjs: {type: \"array\", default: []}\r\n    },\r\n\r\n    init: function () {\r\n        const ICON_HEIGHT = 0.05;\r\n        const ICON_WIDTH = 0.05;\r\n\r\n        // Preview Icons\r\n        this.assetElementsMap = [];\r\n        let startPos = this.el.getAttribute('position');\r\n\r\n        this.previewObj = null;\r\n\r\n        let previewIconG = new THREE.BoxBufferGeometry(ICON_HEIGHT, 0.01, ICON_WIDTH);\r\n        let previewIconM = new THREE.MeshBasicMaterial({\r\n            color: 0xeeeeee,\r\n            side: 'double'\r\n        });\r\n\r\n        // Adds image to icon(button) if present\r\n        let image = this.getImage();\r\n        if (image !== null) {\r\n            previewIconM.map = image;\r\n        }\r\n\r\n        this.previewIconMesh = new THREE.Mesh(previewIconG, previewIconM);\r\n        // Aligns Picture Icon in the correct orientation\r\n        this.previewIconMesh.rotateY(Math.PI/2);\r\n        this.el.setObject3D('mesh', this.previewIconMesh);\r\n\r\n\r\n        // Pressing Animations\r\n        let animationDown = document.createElement('a-animation');\r\n        animationDown.setAttribute('attribute', \"position\");\r\n        animationDown.setAttribute('dur', \"100\");\r\n        animationDown.setAttribute('to', `${startPos.x} ${startPos.y + -0.005} ${startPos.z}`);\r\n        animationDown.setAttribute('begin', \"down\");\r\n        this.el.appendChild(animationDown);\r\n\r\n        let animationUp = document.createElement('a-animation');\r\n        animationUp.setAttribute('attribute', \"position\");\r\n        animationUp.setAttribute('dur', \"100\");\r\n        animationUp.setAttribute('to', `${startPos.x} ${startPos.y} ${startPos.z}`);\r\n        animationUp.setAttribute('begin', \"up\");\r\n        this.el.appendChild(animationUp);\r\n\r\n        this.el.flushToDOM();\r\n\r\n        // Check if preview obj is present\r\n        if (this.data.obj !== '' && this.data.mtl !== '') {\r\n\r\n            // Create preview Obj\r\n            this.previewObj = document.createElement('a-entity');\r\n            this.previewObj.setAttribute('obj-model', {\r\n                obj: this.data.obj,\r\n                mtl: this.data.mtl\r\n            });\r\n\r\n            this.previewObj.setAttribute('scale', '0.01 0.01 0.01');\r\n            this.previewObj.setAttribute('position', '-0.12 0 0');\r\n            this.previewObj.setAttribute('rotation', '-90 0 90');\r\n            // this.previewObj.setAttribute('material', 'visible: false');\r\n\r\n            this.previewObj.flushToDOM();\r\n        } else {\r\n            console.warn(`Data obj not found on`, this.el);\r\n        }\r\n\r\n        //this.el.flushToDOM();\r\n        //this.el.setAttribute('position', '-0.2 0.1 0.1');\r\n    \r\n\r\n        // Sets aframe extra's sphere collider onto icon\r\n        //this.el.setAttribute('class', \"preview-icon\");\r\n        this.el.setAttribute('aabb-collider', 'objects: [hand-controls]');\r\n        this.el.setAttribute('class', 'collides');\r\n        \r\n        this.el.addEventListener('hitstart', (e) => {\r\n            console.log(\"HIT HAS HAPPENED\");\r\n            this.el.emit('down');\r\n            this.addPreviewObj();\r\n        });\r\n\r\n        this.el.addEventListener('hitend', (e) => {\r\n            console.log(\"HIT END HAS HAPPENED\");\r\n            this.el.emit('up');\r\n            this.removePreviewObj();\r\n        });\r\n\r\n                \r\n                \r\n                //previewObj.material.wireframe = true;\r\n                console.log('ICON', this.el); \r\n    },\r\n    update: function () {},\r\n    tick: function () {},\r\n    remove: function () {},\r\n    pause: function () {},\r\n    play: function () {},\r\n\r\n    getImage() {\r\n        let previewImage = this.data.previewImage;\r\n        if (previewImage !== 'undefined' && previewImage !== undefined) {\r\n            try {\r\n                let image = THREE.ImageUtils.loadTexture(previewImage);\r\n                return image;\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n\r\n    addPreviewObj() {\r\n        if (this.previewObj) {\r\n            this.el.appendChild(this.previewObj);\r\n        }\r\n    },\r\n\r\n    removePreviewObj() {\r\n        let preObj = this.el.querySelector('a-entity[obj-model]');\r\n        if (preObj) {\r\n            this.el.removeChild(preObj);\r\n        } else {\r\n            console.log('No preview object to remove');\r\n        }\r\n    },\r\n\r\n    previewObjVisible() {\r\n        let preObj = this.el.querySelector('a-entity[obj-model]');\r\n        if (preObj) {\r\n            preObj.setAttribute('material', 'visible: true');\r\n        } else {\r\n            console.log('No preview object found');\r\n        }\r\n    },\r\n\r\n    hidePreviewObj() {\r\n        let preObj = this.el.querySelector('a-entity[obj-model]');\r\n        if (preObj) {\r\n            preObj.setAttribute('material', 'visible: false');\r\n        } else {\r\n            console.log('No preview object found');\r\n        }\r\n    }\r\n  });","//import './components/background';\r\n//import './components/birds';\r\n\r\n//import './components/vr-background-nav';\r\n\r\nimport './projects/vr-mechanism';\r\nimport './components/vr-arm-item-selector';\r\nimport './components/vr-arm-preview-icon';\r\nimport './components/grab-assets';\r\n\r\nconst abstracts = require('./abstracts');","\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2ci1tZWNoYW5pc20uanMiLCJzb3VyY2VzQ29udGVudCI6W119"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYWJzdHJhY3RzLmpzIiwic3JjL2pzL2NvbXBvbmVudHMvZ3JhYi1hc3NldHMuanMiLCJzcmMvanMvY29tcG9uZW50cy92ci1hcm0taXRlbS1zZWxlY3Rvci5qcyIsInNyYy9qcy9jb21wb25lbnRzL3ZyLWFybS1wcmV2aWV3LWljb24uanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9wcm9qZWN0cy92ci1tZWNoYW5pc20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0NBLElBQU0sWUFBWTs7QUFFZCxxQkFBaUIsUUFGSDtBQUdkLGlCQUFhLFFBSEM7QUFJZCxjQUFVLFFBSkk7QUFLZCxnQkFBWSxRQUxFO0FBTWQsZUFBVyxRQU5HOztBQVFkLHFCQUFpQixRQVJIO0FBU2QscUJBQWlCLFFBVEg7QUFVZCxxQkFBaUIsUUFWSDtBQVdkLHFCQUFpQixRQVhIO0FBWWQscUJBQWlCLFFBWkg7QUFhZCxxQkFBaUIsUUFiSDs7QUFlZCxlQUFXO0FBQ1AscUJBQWEsQ0FBQztBQURQO0FBZkcsQ0FBbEI7O0FBb0JBLE9BQU8sT0FBUCxHQUFpQixTQUFqQjs7Ozs7QUNyQkE7QUFDQSxPQUFPLGlCQUFQLENBQXlCLGFBQXpCLEVBQXdDO0FBQ3BDLFlBQVEsRUFENEI7QUFFcEMsVUFBTSxnQkFBVztBQUFBOztBQUNiLGFBQUssVUFBTCxHQUFrQixLQUFLLEVBQXZCOztBQUVBOztBQUVBLGFBQUssYUFBTCxHQUFxQixJQUFJLE1BQU0sT0FBVixFQUFyQjtBQUNBLGFBQUssY0FBTCxHQUFzQixTQUF0QixDQU5hLENBTWlDO0FBQzlDLGFBQUssV0FBTCxHQUFtQixLQUFuQixDQVBhLENBTytCOztBQUU1QyxhQUFLLHNCQUFMLEdBQThCLElBQUksTUFBTSxVQUFWLEVBQTlCO0FBQ0EsYUFBSyxvQkFBTCxHQUE0QixJQUFJLE1BQU0sVUFBVixFQUE1QjtBQUNBLGFBQUss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LENBQWxCOzs7QUNWQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc31yZXR1cm4gZX0pKCkiLCJcclxuY29uc3QgYWJzdHJhY3RzID0ge1xyXG5cclxuICAgIGJhY2tncm91bmRjb2xvcjogMHhmZWZlZmUsXHJcbiAgICBhY2NlbnRDb2xvcjogMHg1NTg4ZmYsXHJcbiAgICBza3lDb2xvcjogMHg4N0NFRkEsXHJcbiAgICBncm91ZENvbG9yOiAweDNDQjM3MSxcclxuICAgIHdhcm1Db2xvcjogMHhlNWE2NjUsXHJcblxyXG4gICAgdGhlbWVNb25vQ29sb3IxOiAweEY2RkFGQixcclxuICAgIHRoZW1lTW9ub0NvbG9yMjogMHhDM0NBQ0QsXHJcbiAgICB0aGVtZU1vbm9Db2xvcjM6IDB4OTdBMUE0LFxyXG4gICAgdGhlbWVNb25vQ29sb3I0OiAweDcxN0M4MCxcclxuICAgIHRoZW1lTW9ub0NvbG9yNTogMHg0OTU2NUEsXHJcbiAgICB0aGVtZU1vbm9Db2xvcjY6IDB4MUYyODJDLFxyXG5cclxuICAgIHBhcnRpY2xlczoge1xyXG4gICAgICAgIEZMT09SX0xFVkVMOiAtMTBcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhYnN0cmFjdHM7IiwiLy8gTXVzdCBiZSBwbGFjZWQgb24gY29udHJvbGxlciBlbGVtZW50c1xyXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2dyYWItYXNzZXRzJywge1xyXG4gICAgc2NoZW1hOiB7fSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHRoaXMuZWw7XHJcblxyXG4gICAgICAgIC8vdGhpcy5lbC5cclxuXHJcbiAgICAgICAgdGhpcy5hc3NldFdvcmxkUG9zID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRBc3NldEVsID0gdW5kZWZpbmVkOyAgICAgICAgICAgICAgLy8gVGhlIGFzc2V0cyBlbGVtZW50XHJcbiAgICAgICAgdGhpcy51cGRhdGVBc3NldCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAvLyBXaGV0aGVyIHRvIGNvbnRpbnVvdXNseSB1cGRhdGUgdGhlIGFzc2V0cyBiZWluZyBncmFiYmVkXHJcblxyXG4gICAgICAgIHRoaXMuY3VycmVudEFzc2V0UXVhdGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgdGhpcy50ZW1wQXNzZXRRdWFudGVybmlvbiA9IG5ldyBUSFJFRS5RdWF0ZXJuaW9uKCk7XHJcbiAgICAgICAgdGhpcy5zdGFydGluZ0Fzc2V0UXVhbnRlcm5pb24gPSBuZXcgVEhSRUUuUXVhdGVybmlvbigpO1xyXG4gICAgICAgIC8vdGhpcy5pY29ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1twcmV2aWV3LWljb25dJylcclxuICAgICAgICBcclxuICAgICAgICAvLyBXaGVuIHRoZSBjb250cm9sbGVyIHRpZ2dlciBpcyBwcmVzc2VkIGRvd25cclxuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuYWRkRXZlbnRMaXN0ZW5lcigndHJpZ2dlcmRvd24nLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJpZ2dlciBkb3duJyk7XHJcbiAgICAgICAgICAgIC8vIFRoZSBjb250cm9sbGVyIGNhbiBlaXRoZXIgYmUgXCJmcmVlXCIgb3IgXCJjb2xsaWRpbmdcIiBhcyBzcGVjaWZpZWQgaW4gdGhlIG1haW4uanMgZmlsZVxyXG4gICAgICAgICAgICAvLyBDb2xsaWRpbmcgcmVmZXJzIHRvIGNvbGxpZGluZyB3aXRoIGEgcHJldmlldy1pY29uXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIuaXMoJ2NvbGxpZGluZycpKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhc3NldEVsID0gdGhpcy5lbC5jb21wb25lbnRzWydhYWJiLWNvbGxpZGVyJ11bJ2ludGVyc2VjdGVkRWxzJ11bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFzc2V0RGF0YSA9IHVuZGVmaW5lZDsgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0RWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFzc2V0RWwuY29tcG9uZW50c1sncHJldmlldy1pY29uJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXZpZXcgSWNvbiBDbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXREYXRhID0gYXNzZXRFbC5jb21wb25lbnRzWydwcmV2aWV3LWljb24nXS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVBc3NldChhc3NldERhdGEub2JqLCBhc3NldERhdGEubXRsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhc3NldEVsLmNvbXBvbmVudHNbJ29iai1tb2RlbCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPYmplY3QgTW9kZWwgQ2xpY2tlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50QXNzZXRFbCA9IGFzc2V0RWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFzc2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYXNzZXRFbC5vYmplY3QzRC5wb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3ByZXZpZXdJY29uRWwuY29tcG9uZW50c1sncHJldmlldy1pY29uJ10uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29sbGlkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RyaWdnZXJ1cCcsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xsZXIuaXMoJ2NvbGxpZGluZycpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29sbGlkaW5nJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBc3NldCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndHJpZ2dlciB1cCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICB0aWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudXBkYXRlQXNzZXQgIT09IGZhbHNlICYmIHRoaXMuY3VycmVudEFzc2V0RWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgd29ybGRQb3MgPSB0aGlzLmNhbGNXb3JsZFBvcyh0aGlzLmVsLm9iamVjdDNELm1hdHJpeFdvcmxkKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QXNzZXRFbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgYCR7d29ybGRQb3MueH0gJHt3b3JsZFBvcy55fSAke3dvcmxkUG9zLnp9YCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEFzc2V0UXVhdGVybmlvbi5jb3B5KHRoaXMuZWwub2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKCkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmN1cnJlbnRBc3NldFF1YXRlcm5pb24pO1xyXG4gICAgICAgICAgICB0aGlzLnRlbXBBc3NldFF1YW50ZXJuaW9uLm11bHRpcGx5UXVhdGVybmlvbnModGhpcy5zdGFydGluZ0Fzc2V0UXVhdGVybmlvbiwgdGhpcy5jdXJyZW50QXNzZXRRdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5jdXJyZW50QXNzZXRRdWF0ZXJuaW9uKTtcclxuICAgICAgICAgICAgLy90aGlzLmN1cnJlbnRBc3NldFF1YXRlcm5pb24ubXVsdGlwbHkodGhpcy5lbC5vYmplY3QzRC5nZXRXb3JsZFF1YXRlcm5pb24oKSk7XHJcbiAgICAgICAgICAgIC8vIFJvdGF0aW9uXHJcbiAgICAgICAgICAgIC8vLmFwcGx5UXVhdGVybmlvbih0aGlzLmVsLm9iamVjdDNELmdldFdvcmxkUXVhdGVybmlvbigpKTtcclxuICAgICAgICAgICAgLy90aGlzLmN1cnJlbnRBc3NldEVsLm9iamVjdDNELnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGhpcy50ZW1wQXNzZXRRdWFudGVybmlvbik7XHJcbiAgICAgICAgICAgIC8vdGhpcy5jdXJyZW50QXNzZXRFbC5vYmplY3QzRC5zZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHRoaXMuZWwub2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKCkpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKCd1cGRhdGUnLCB0aGlzLnVwZGF0ZUFzc2V0LCAnYXNzZXQnLCB0aGlzLmN1cnJlbnRBc3NldEVsKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygnYXNzZXQnLCB0aGlzLmN1cnJlbnRBc3NldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICBwbGF5OiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICBjcmVhdGVBc3NldChvYmpVcmwsIG10bFVybCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudEFzc2V0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhLWVudGl0eScpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEFzc2V0RWwuc2V0QXR0cmlidXRlKCdvYmotbW9kZWwnLCB7XHJcbiAgICAgICAgICAgIG9iajogb2JqVXJsLFxyXG4gICAgICAgICAgICBtdGw6IG10bFVybFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRBc3NldEVsLnNldEF0dHJpYnV0ZSgnc2NhbGUnLCAnMC4wMSAwLjAxIDAuMDEnKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRBc3NldEVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29sbGlkZXMnKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1BPU0lUSU9OJyk7XHJcblxyXG4gICAgICAgIC8vdGhpcy5jYWxjV29ybGRQb3ModGhpcy5lbC5vYmplY3QzRC5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgLy90aGlzLmN1cnJlbnRBc3NldEVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBgJHt0aGlzLmFzc2V0V29ybGRQb3MueH0gJHt0aGlzLmFzc2V0V29ybGRQb3MueX0gJHt0aGlzLmFzc2V0V29ybGRQb3Muen1gKTtcclxuICAgICAgICBcclxuICAgICAgICAvL3RoaXMuY3VycmVudEFzc2V0UXVhdGVybmlvbi5jb3B5KHRoaXMuY3VycmVudEFzc2V0RWwub2JqZWN0M0QuZ2V0V29ybGRRdWF0ZXJuaW9uKCkpO1xyXG4gICAgICAgIHRoaXMuc3RhcnRpbmdBc3NldFF1YW50ZXJuaW9uLmNvcHkodGhpcy5jdXJyZW50QXNzZXRFbC5vYmplY3QzRC5nZXRXb3JsZFF1YXRlcm5pb24oKSk7XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zdGFydGluZ0Fzc2V0UXVhbnRlcm5pb24pO1xyXG5cclxuICAgICAgICB0aGlzLmVsLnNjZW5lRWwuYXBwZW5kQ2hpbGQodGhpcy5jdXJyZW50QXNzZXRFbCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QXNzZXRFbC5mbHVzaFRvRE9NKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBc3NldCA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIHVwZGF0ZUV4aXN0aW5nQXNzZXQoYXNzZXRFbCkge1xyXG5cclxuICAgICAgICB0aGlzLmN1cnJlbnRBc3NldEVsLnNldEF0dHJpYnV0ZSgnc2NhbGUnLCAnMC4wMSAwLjAxIDAuMDEnKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRBc3NldEVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnY29sbGlkZXMnKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1BPU0lUSU9OJyk7XHJcblxyXG4gICAgICAgIC8vdGhpcy5jYWxjV29ybGRQb3ModGhpcy5lbC5vYmplY3QzRC5tYXRyaXhXb3JsZCk7XHJcbiAgICAgICAgLy90aGlzLmN1cnJlbnRBc3NldEVsLnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCBgJHt0aGlzLmFzc2V0V29ybGRQb3MueH0gJHt0aGlzLmFzc2V0V29ybGRQb3MueX0gJHt0aGlzLmFzc2V0V29ybGRQb3Muen1gKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmVsLnNjZW5lRWwuYXBwZW5kQ2hpbGQodGhpcy5jdXJyZW50QXNzZXRFbCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50QXNzZXRFbC5mbHVzaFRvRE9NKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVBc3NldCA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbGNXb3JsZFBvcyhlbGVtZW50TWF0cml4KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXRXb3JsZFBvcy5zZXRGcm9tTWF0cml4UG9zaXRpb24oZWxlbWVudE1hdHJpeCk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgfSk7IiwiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdpdGVtLXNlbGVjdG9yJywge1xyXG4gICAgc2NoZW1hOiB7XHJcbiAgICAgICAgLy8gc2l6ZToge3R5cGU6ICd2ZWMyJywgZGVmYXVsdDoge3g6MC41LCB5OjAuMn19XHJcbiAgICAgICAgLy8gQ29udGFpbiBhIGxpc3Qgb2Ygb2JqZWN0c1xyXG4gICAgICAgIC8vIGV4OiB7XHJcbiAgICAgICAgLy8gICAgICBuYW1lOiAgICAvLyBOYW1lIG9mIG9iamVjdFxyXG4gICAgICAgIC8vICAgICAgb2JqOiAgICAgLy8gM0Qgb2JqZWN0IGxvY2F0aW9uXHJcbiAgICAgICAgLy8gICAgICBwcmV2aWV3OiAvLyBQcmV2aWV3IGltYWdlIGxvY2F0aW9uXHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGFzc2V0TGlzdDoge3R5cGU6ICdzdHJpbmcnLCBkZWZhdWx0OiBcIltdXCJ9XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhLmFzc2V0TGlzdCk7XHJcblxyXG4gICAgICAgIHRoaXMuYXNzZXRMaXN0ID0gW107XHJcblxyXG4gICAgICAgIC8vIERpc3BsYXkgcmVjdGFuZ2xlXHJcbiAgICAgICAgbGV0IGRpc3BsYXlHID0gbmV3IFRIUkVFLkJveEJ1ZmZlckdlb21ldHJ5KDAuMiwgMC4wMSwgMC4zNSk7XHJcbiAgICAgICAgbGV0IGRpc3BsYXlNID0gbmV3IFRIUkVFLk1lc2hCYXNpY01hdGVyaWFsKHtcclxuICAgICAgICAgICAgY29sb3I6IDB4YmJiYmZmLFxyXG4gICAgICAgICAgICBzaWRlOiAnZG91YmxlJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU1lc2ggPSBuZXcgVEhSRUUuTWVzaChkaXNwbGF5RywgZGlzcGxheU0pO1xyXG5cclxuICAgICAgICB0aGlzLmVsLnNldE9iamVjdDNEKCdtZXNoJywgdGhpcy5kaXNwbGF5TWVzaCk7XHJcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJy0wLjEgMC4yIDAuMScpO1xyXG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsICcwIDAgLTc1Jyk7XHJcblxyXG5cclxuICAgICAgICAvLyBQcmV2aWV3IEljb24gQ29udGFpbmVyXHJcbiAgICAgICAgY29uc3QgSUNPTl9IRUlHSFQgPSAwLjA1O1xyXG4gICAgICAgIGNvbnN0IElDT05fV0lEVEggPSAwLjA1O1xyXG4gICAgICAgIHRoaXMuSUNPTl9PRkZTRVQgPSAwLjExO1xyXG4gICAgICAgIHRoaXMuSUNPTl9NVUxUSVBMWUVSID0gMC4wODtcclxuXHJcbiAgICAgICAgbGV0IHByZXZpZXdJY29uQ29udGFpbmVyRyA9IG5ldyBUSFJFRS5Cb3hCdWZmZXJHZW9tZXRyeShJQ09OX0hFSUdIVCwgMC4wMSwgSUNPTl9XSURUSCk7XHJcbiAgICAgICAgbGV0IHByZXZpZXdJY29uQ29udGFpbmVyTSA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIGNvbG9yOiAweDk5OTk5OSxcclxuICAgICAgICAgICAgc2lkZTogJ2RvdWJsZSdcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnByZXZpZXdJY29uQ29udGFpbmVyTWVzaCA9IG5ldyBUSFJFRS5NZXNoKGRpc3BsYXlHLCBkaXNwbGF5TSk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIFNldHVwIGFzc2VydExpc3RcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2V0TGlzdCA9IEpTT04ucGFyc2UodGhpcy5kYXRhLmFzc2V0TGlzdCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXNzZXRMaXN0KHRoaXMuYXNzZXRMaXN0KTtcclxuICAgICAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICB0aWNrOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICBwbGF5OiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICB1cGRhdGVBc3NldExpc3QobmV3QXNzZXRMaXN0KSB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGFsbCBwcmV2aW91cyBlbGVtZW50cyBmcm9tIHRoZSBsaXN0XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuY3VycmVudEFzc2V0RWxlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vICAgICB0aGlzLmN1cnJlbnRBc3NldEVsZW1lbnRzLmZvckVhY2goKGFzc2V0KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmVsLnJlbW92ZU9iamVjdDNEKGFzc2V0Lm5hbWUuIGFzc2V0Lm1lc2gpO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2hpdDEnKTtcclxuICAgICAgICBpZiAobmV3QXNzZXRMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbmV3QXNzZXRMaXN0LmZvckVhY2goKGFzc2V0LCBpKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQXNzZXQnICwgYXNzZXQpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hpdCBpbnNpZGUnKTtcclxuICAgICAgICAgICAgICAgIC8vdGhpcy5lbC5zZXRPYmplY3QzRCgnaWNvbl8nICsgaSwgdGhpcy5kaXNwbGF5TWVzaCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGljb24uc2V0QXR0cmlidXRlKCdwcmV2aWV3LWljb24nLCBgbmFtZTogJHthc3NldC5uYW1lfTsgb2JqOiAke2Fzc2V0Lm9ian07IG10bDogJHthc3NldC5tdGx9OyBwcmV2aWV3SW1hZ2U6ICR7YXNzZXQucHJldmlld0ltYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgaWNvbi5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgYDAgMC4wMSAkeygtaSp0aGlzLklDT05fTVVMVElQTFlFUikgKyB0aGlzLklDT05fT0ZGU0VUfWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChpY29uKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VsZW1lbnQgQ3JlYXRlZCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy90aGlzLmVsLnNldE9iamVjdDNEKCdpY29uXzEnLCB0aGlzLmRpc3BsYXlNZXNoKTtcclxuICAgICAgICAvL3RoaXMuZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICctMC4yIDAgMC4xJyk7XHJcbiAgICB9XHJcbiAgfSk7IiwiQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdwcmV2aWV3LWljb24nLCB7XHJcbiAgICBzY2hlbWE6IHtcclxuICAgICAgICBuYW1lOiB7dHlwZTogXCJzdHJpbmdcIiwgZGVmYXVsdDogXCJ0ZW1wXCJ9LFxyXG4gICAgICAgIHByZXZpZXdJbWFnZToge3R5cGU6IFwic3RyaW5nXCIsICdkZWZhdWx0JzogJyd9LFxyXG4gICAgICAgIG9iajoge3R5cGU6IFwic3RyaW5nXCIsIGRlZmF1bHQ6ICcnfSxcclxuICAgICAgICBtdGw6IHt0eXBlOiBcInN0cmluZ1wiLCBkZWZhdWx0OiAnJ30sXHJcbiAgICAgICAgY29sbGlzaW9uT2Jqczoge3R5cGU6IFwiYXJyYXlcIiwgZGVmYXVsdDogW119XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBJQ09OX0hFSUdIVCA9IDAuMDU7XHJcbiAgICAgICAgY29uc3QgSUNPTl9XSURUSCA9IDAuMDU7XHJcblxyXG4gICAgICAgIC8vIFByZXZpZXcgSWNvbnNcclxuICAgICAgICB0aGlzLmFzc2V0RWxlbWVudHNNYXAgPSBbXTtcclxuICAgICAgICBsZXQgc3RhcnRQb3MgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcmV2aWV3T2JqID0gbnVsbDtcclxuXHJcbiAgICAgICAgbGV0IHByZXZpZXdJY29uRyA9IG5ldyBUSFJFRS5Cb3hCdWZmZXJHZW9tZXRyeShJQ09OX0hFSUdIVCwgMC4wMSwgSUNPTl9XSURUSCk7XHJcbiAgICAgICAgbGV0IHByZXZpZXdJY29uTSA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7XHJcbiAgICAgICAgICAgIGNvbG9yOiAweGVlZWVlZSxcclxuICAgICAgICAgICAgc2lkZTogJ2RvdWJsZSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkcyBpbWFnZSB0byBpY29uKGJ1dHRvbikgaWYgcHJlc2VudFxyXG4gICAgICAgIGxldCBpbWFnZSA9IHRoaXMuZ2V0SW1hZ2UoKTtcclxuICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgcHJldmlld0ljb25NLm1hcCA9IGltYWdlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5wcmV2aWV3SWNvbk1lc2ggPSBuZXcgVEhSRUUuTWVzaChwcmV2aWV3SWNvbkcsIHByZXZpZXdJY29uTSk7XHJcbiAgICAgICAgLy8gQWxpZ25zIFBpY3R1cmUgSWNvbiBpbiB0aGUgY29ycmVjdCBvcmllbnRhdGlvblxyXG4gICAgICAgIHRoaXMucHJldmlld0ljb25NZXNoLnJvdGF0ZVkoTWF0aC5QSS8yKTtcclxuICAgICAgICB0aGlzLmVsLnNldE9iamVjdDNEKCdtZXNoJywgdGhpcy5wcmV2aWV3SWNvbk1lc2gpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gUHJlc3NpbmcgQW5pbWF0aW9uc1xyXG4gICAgICAgIGxldCBhbmltYXRpb25Eb3duID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYS1hbmltYXRpb24nKTtcclxuICAgICAgICBhbmltYXRpb25Eb3duLnNldEF0dHJpYnV0ZSgnYXR0cmlidXRlJywgXCJwb3NpdGlvblwiKTtcclxuICAgICAgICBhbmltYXRpb25Eb3duLnNldEF0dHJpYnV0ZSgnZHVyJywgXCIxMDBcIik7XHJcbiAgICAgICAgYW5pbWF0aW9uRG93bi5zZXRBdHRyaWJ1dGUoJ3RvJywgYCR7c3RhcnRQb3MueH0gJHtzdGFydFBvcy55ICsgLTAuMDA1fSAke3N0YXJ0UG9zLnp9YCk7XHJcbiAgICAgICAgYW5pbWF0aW9uRG93bi5zZXRBdHRyaWJ1dGUoJ2JlZ2luJywgXCJkb3duXCIpO1xyXG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoYW5pbWF0aW9uRG93bik7XHJcblxyXG4gICAgICAgIGxldCBhbmltYXRpb25VcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtYW5pbWF0aW9uJyk7XHJcbiAgICAgICAgYW5pbWF0aW9uVXAuc2V0QXR0cmlidXRlKCdhdHRyaWJ1dGUnLCBcInBvc2l0aW9uXCIpO1xyXG4gICAgICAgIGFuaW1hdGlvblVwLnNldEF0dHJpYnV0ZSgnZHVyJywgXCIxMDBcIik7XHJcbiAgICAgICAgYW5pbWF0aW9uVXAuc2V0QXR0cmlidXRlKCd0bycsIGAke3N0YXJ0UG9zLnh9ICR7c3RhcnRQb3MueX0gJHtzdGFydFBvcy56fWApO1xyXG4gICAgICAgIGFuaW1hdGlvblVwLnNldEF0dHJpYnV0ZSgnYmVnaW4nLCBcInVwXCIpO1xyXG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoYW5pbWF0aW9uVXApO1xyXG5cclxuICAgICAgICB0aGlzLmVsLmZsdXNoVG9ET00oKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgcHJldmlldyBvYmogaXMgcHJlc2VudFxyXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqICE9PSAnJyAmJiB0aGlzLmRhdGEubXRsICE9PSAnJykge1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHByZXZpZXcgT2JqXHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld09iaiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EtZW50aXR5Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld09iai5zZXRBdHRyaWJ1dGUoJ29iai1tb2RlbCcsIHtcclxuICAgICAgICAgICAgICAgIG9iajogdGhpcy5kYXRhLm9iaixcclxuICAgICAgICAgICAgICAgIG10bDogdGhpcy5kYXRhLm10bFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld09iai5zZXRBdHRyaWJ1dGUoJ3NjYWxlJywgJzAuMDEgMC4wMSAwLjAxJyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldmlld09iai5zZXRBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJy0wLjEyIDAgMCcpO1xyXG4gICAgICAgICAgICB0aGlzLnByZXZpZXdPYmouc2V0QXR0cmlidXRlKCdyb3RhdGlvbicsICctOTAgMCA5MCcpO1xyXG4gICAgICAgICAgICAvLyB0aGlzLnByZXZpZXdPYmouc2V0QXR0cmlidXRlKCdtYXRlcmlhbCcsICd2aXNpYmxlOiBmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3T2JqLmZsdXNoVG9ET00oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYERhdGEgb2JqIG5vdCBmb3VuZCBvbmAsIHRoaXMuZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy90aGlzLmVsLmZsdXNoVG9ET00oKTtcclxuICAgICAgICAvL3RoaXMuZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsICctMC4yIDAuMSAwLjEnKTtcclxuICAgIFxyXG5cclxuICAgICAgICAvLyBTZXRzIGFmcmFtZSBleHRyYSdzIHNwaGVyZSBjb2xsaWRlciBvbnRvIGljb25cclxuICAgICAgICAvL3RoaXMuZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIFwicHJldmlldy1pY29uXCIpO1xyXG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdhYWJiLWNvbGxpZGVyJywgJ29iamVjdHM6IFtoYW5kLWNvbnRyb2xzXScpO1xyXG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsICdjb2xsaWRlcycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignaGl0c3RhcnQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhJVCBIQVMgSEFQUEVORURcIik7XHJcbiAgICAgICAgICAgIHRoaXMuZWwuZW1pdCgnZG93bicpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFByZXZpZXdPYmooKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdoaXRlbmQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhJVCBFTkQgSEFTIEhBUFBFTkVEXCIpO1xyXG4gICAgICAgICAgICB0aGlzLmVsLmVtaXQoJ3VwJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlUHJldmlld09iaigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvL3ByZXZpZXdPYmoubWF0ZXJpYWwud2lyZWZyYW1lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJQ09OJywgdGhpcy5lbCk7IFxyXG4gICAgfSxcclxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICB0aWNrOiBmdW5jdGlvbiAoKSB7fSxcclxuICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge30sXHJcbiAgICBwbGF5OiBmdW5jdGlvbiAoKSB7fSxcclxuXHJcbiAgICBnZXRJbWFnZSgpIHtcclxuICAgICAgICBsZXQgcHJldmlld0ltYWdlID0gdGhpcy5kYXRhLnByZXZpZXdJbWFnZTtcclxuICAgICAgICBpZiAocHJldmlld0ltYWdlICE9PSAndW5kZWZpbmVkJyAmJiBwcmV2aWV3SW1hZ2UgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGltYWdlID0gVEhSRUUuSW1hZ2VVdGlscy5sb2FkVGV4dHVyZShwcmV2aWV3SW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGltYWdlO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRQcmV2aWV3T2JqKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnByZXZpZXdPYmopIHtcclxuICAgICAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZCh0aGlzLnByZXZpZXdPYmopO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcmVtb3ZlUHJldmlld09iaigpIHtcclxuICAgICAgICBsZXQgcHJlT2JqID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yKCdhLWVudGl0eVtvYmotbW9kZWxdJyk7XHJcbiAgICAgICAgaWYgKHByZU9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmVsLnJlbW92ZUNoaWxkKHByZU9iaik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHByZXZpZXcgb2JqZWN0IHRvIHJlbW92ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgcHJldmlld09ialZpc2libGUoKSB7XHJcbiAgICAgICAgbGV0IHByZU9iaiA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignYS1lbnRpdHlbb2JqLW1vZGVsXScpO1xyXG4gICAgICAgIGlmIChwcmVPYmopIHtcclxuICAgICAgICAgICAgcHJlT2JqLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAndmlzaWJsZTogdHJ1ZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBwcmV2aWV3IG9iamVjdCBmb3VuZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgaGlkZVByZXZpZXdPYmooKSB7XHJcbiAgICAgICAgbGV0IHByZU9iaiA9IHRoaXMuZWwucXVlcnlTZWxlY3RvcignYS1lbnRpdHlbb2JqLW1vZGVsXScpO1xyXG4gICAgICAgIGlmIChwcmVPYmopIHtcclxuICAgICAgICAgICAgcHJlT2JqLnNldEF0dHJpYnV0ZSgnbWF0ZXJpYWwnLCAndmlzaWJsZTogZmFsc2UnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gcHJldmlldyBvYmplY3QgZm91bmQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgfSk7IiwiLy9pbXBvcnQgJy4vY29tcG9uZW50cy9iYWNrZ3JvdW5kJztcclxuLy9pbXBvcnQgJy4vY29tcG9uZW50cy9iaXJkcyc7XHJcblxyXG4vL2ltcG9ydCAnLi9jb21wb25lbnRzL3ZyLWJhY2tncm91bmQtbmF2JztcclxuXHJcbmltcG9ydCAnLi9wcm9qZWN0cy92ci1tZWNoYW5pc20nO1xyXG5pbXBvcnQgJy4vY29tcG9uZW50cy92ci1hcm0taXRlbS1zZWxlY3Rvcic7XHJcbmltcG9ydCAnLi9jb21wb25lbnRzL3ZyLWFybS1wcmV2aWV3LWljb24nO1xyXG5pbXBvcnQgJy4vY29tcG9uZW50cy9ncmFiLWFzc2V0cyc7XHJcblxyXG5jb25zdCBhYnN0cmFjdHMgPSByZXF1aXJlKCcuL2Fic3RyYWN0cycpOyIsIlwidXNlIHN0cmljdFwiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJaUlzSW1acGJHVWlPaUoyY2kxdFpXTm9ZVzVwYzIwdWFuTWlMQ0p6YjNWeVkyVnpRMjl1ZEdWdWRDSTZXMTE5Il19"}